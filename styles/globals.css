@tailwind base;
@tailwind components;
@tailwind utilities;

/* Add dark mode support for body and backgrounds */
body {
  @apply bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100;
}

/* Example for section backgrounds */
section {
  @apply bg-white dark:bg-gray-900;
}

/* Example for card backgrounds */
.card {
  @apply bg-white dark:bg-gray-800;
}

/* Example for table headers */
thead {
  @apply bg-blue-900 text-white dark:bg-gray-800 dark:text-gray-100;
}

/* Utility for border color in dark mode */
.border {
  @apply border-gray-200 dark:border-gray-700;
}

.header-footer-color {
    @apply bg-blue-900 text-white;
}

/* Concentric rings loader (renamed classes: loading-ring) */
.concentric-loader {
  position: relative;
  width: 160px; /* increased size so rings surround text */
  height: 160px;
  /* create a 3D layer to reduce rendering artifacts */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: transform;
}
.concentric-loader .loading-ring {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  box-sizing: border-box;
  /* draw thin border but only color the top side for a smooth spinner look */
  border-style: solid;
  border-color: transparent;
  /* ensure the element does not render as a filled circle */
  background: transparent;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  will-change: transform;
  z-index: 0; /* ensure rings are behind the text */
  pointer-events: none;
}
.concentric-loader .loading-ring-1 {
  width: 160px;
  height: 160px;
  border-width: 6px;
  border-top-color: rgba(59,130,246,1); /* sky-500 */
  animation: spin-clock 1.6s linear infinite;
}
.concentric-loader .loading-ring-2 {
  width: 120px;
  height: 120px;
  border-width: 6px;
  border-top-color: rgba(16,185,129,1); /* green-500 */
  animation: spin-counter 1.1s linear infinite;
}
.concentric-loader .loading-ring-3 {
  width: 80px;
  height: 80px;
  border-width: 6px;
  border-top-color: rgba(234,88,12,1); /* orange-ish */
  animation: spin-clock-fast 0.75s linear infinite;
}

/* Smooth continuous rotation */
@keyframes spin-clock {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}
@keyframes spin-counter {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(-360deg); }
}
@keyframes spin-clock-fast {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Optional: reduce aliasing by forcing GPU compositing on the rings */
.concentric-loader .loading-ring,
.concentric-loader {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.loader-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  /* prevent subpixel gaps */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.concentric-loader .loader-text {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  color: rgba(17,24,39,1); /* gray-900 */
  font-weight: 600;
  font-size: 1rem; /* 16px */
  text-align: center;
  pointer-events: none;
  z-index: 10; /* appear above rings */
  padding: 0 8px; /* ensure some spacing from inner ring */
}

/* Dark mode variation for loader text */
.dark .concentric-loader .loader-text {
  color: rgba(243,244,246,1); /* gray-100 */
}
@media (prefers-color-scheme: dark) {
  .concentric-loader .loader-text {
    color: rgba(243,244,246,1); /* gray-100 */
  }
}

/* OSDF map popup dark theme + micro animation */
.osdf-popup .mapboxgl-popup-content {
  background: #0f172a;
  color: #e2e8f0;
  border: 1px solid #475569;
  border-radius: 0.85rem;
  padding: 0;
  box-shadow: 0 18px 34px rgba(2, 6, 23, 0.58);
  animation: osdfPopupIn 130ms cubic-bezier(0.22, 1, 0.36, 1);
  transform-origin: center;
}

.osdf-popup.mapboxgl-popup-anchor-left .mapboxgl-popup-content {
  transform-origin: left center;
}

.osdf-popup.mapboxgl-popup-anchor-right .mapboxgl-popup-content {
  transform-origin: right center;
}

.osdf-popup .mapboxgl-popup-close-button {
  top: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  border-radius: 9999px;
  border: 1px solid #475569;
  background: #1e293b;
  color: #cbd5e1;
  font-size: 15px;
  line-height: 24px;
  text-align: center;
  transition: all 120ms ease;
}

.osdf-popup .mapboxgl-popup-close-button:hover {
  background: #334155;
  color: #f8fafc;
  border-color: #64748b;
}

.osdf-popup.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,
.osdf-popup.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,
.osdf-popup.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip {
  border-bottom-color: #0f172a;
}

.osdf-popup.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,
.osdf-popup.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,
.osdf-popup.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {
  border-top-color: #0f172a;
}

.osdf-popup.mapboxgl-popup-anchor-left .mapboxgl-popup-tip {
  border-right-color: #0f172a;
}

.osdf-popup.mapboxgl-popup-anchor-right .mapboxgl-popup-tip {
  border-left-color: #0f172a;
}

@keyframes osdfPopupIn {
  from {
    opacity: 0;
    transform: translateY(4px) scale(0.97);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Dark-styled map controls */
.osdf-map .mapboxgl-ctrl-top-right {
  top: 0.75rem;
  right: 0.75rem;
}

.osdf-map .mapboxgl-ctrl-group {
  overflow: hidden;
  border-radius: 0.75rem;
  border: 1px solid #334155;
  background: rgba(15, 23, 42, 0.92);
  box-shadow: 0 8px 20px rgba(2, 6, 23, 0.4);
}

.osdf-map .mapboxgl-ctrl-group button {
  width: 34px;
  height: 34px;
  background: transparent;
}

.osdf-map .mapboxgl-ctrl-group button + button {
  border-top: 1px solid #334155;
}

.osdf-map .mapboxgl-ctrl-group button:hover {
  background: #1e293b;
}

.osdf-map .mapboxgl-ctrl-icon {
  filter: brightness(0) invert(1) opacity(0.86);
}

/* OSDF node pulse ring â€” pure CSS animation */
@keyframes osdf-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.45;
  }
  50% {
    transform: scale(1.6);
    opacity: 0;
  }
}

/* Let pulse marker wrappers pass clicks through to the map canvas */
.osdf-map .mapboxgl-marker:has(.osdf-pulse-ring) {
  pointer-events: none !important;
}

.osdf-pulse-ring {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  animation: osdf-pulse 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  pointer-events: none;
}

/* Slight visual distinction for KPI trend fills */
.kpi-trend-sent .recharts-area-area {
  opacity: 0.34;
}

.kpi-trend-received .recharts-area-area {
  opacity: 0.26;
}
